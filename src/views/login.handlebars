<div class="auth-container">
  <div class="auth-box">
    <div class="login-left">
      <h2>Iniciar sesión</h2>
      <form id="loginForm">
        <input name="email" type="email" required placeholder="Correo electrónico" />
        <input name="password" type="password" required placeholder="Contraseña" />
        <button type="submit" class="btn-login">Entrar</button>
      </form>
      <p class="signup-link">
        ¿No tenés cuenta? <a href="/register">Registrate acá</a>
      </p>
    </div>
    <div class="login-right">
      <h3>¡Bienvenido de nuevo!</h3>
      <p>
        Nos alegra verte otra vez. Esperamos que hayas tenido una buena
        experiencia. Iniciá sesión para continuar con tus reservas.
      </p>
    </div>
  </div>
</div>

<script>
  document.getElementById("loginForm").addEventListener("submit", async (e) => {
    e.preventDefault();
    const data = {
      email: e.target.email.value,
      password: e.target.password.value,
    };
    const res = await fetch("/api/sessions/login", {
      method: "POST",
      credentials: "include",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(data),
    });
    const json = await res.json();
    if (res.ok) {
  Swal.fire({
    icon: 'success',
    title: 'Inicio de sesión exitoso!',
    showConfirmButton: false,
    timer: 1500
  });
  setTimeout(() => {
    window.location.href = '/'; // Redirige al usuario a la página de inicio
  }, 1500);
} else {
  Swal.fire({
    icon: 'error',
    title: 'Error al iniciar sesión',
    text: json.message || 'Credenciales inválidas'
  });
}
  });
</script>
