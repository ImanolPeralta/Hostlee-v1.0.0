<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Home | Alquileres</title>
    <link rel="stylesheet" href="/css/styles.css" />
  </head>
  <body>
    <main>
      <!-- Hero section -->
      <section class="hero">
        <div class="hero-overlay">
          <h1 class="hero-title animate-fade-in">Bienvenido a Hostlee</h1>
          <p class="hero-subtitle animate-slide-in">Tu próximo alojamiento está
            a un clic de distancia</p>
        </div>
      </section>

      <!-- Filtros de búsqueda -->
      <form method="GET" action="/" class="filter-form">
        <input
          type="text"
          name="query"
          placeholder="Buscar por categoría, estilo, etc."
          class="filter-input"
        />
        <select name="sort" class="filter-select">
          <option value="">Ordenar por</option>
          <option value="asc">Mayor precio</option>
          <option value="desc">Menor precio</option>
        </select>
        <select name="limit" class="filter-select">
          <option value="5">5 por página</option>
          <option value="10">10 por página</option>
          <option value="20">20 por página</option>
        </select>
        <button type="submit" class="filter-button"><i class="fa-solid fa-magnifying-glass"></i></button>
      </form>

      <!-- Grid de productos -->
      <div class="product-grid">
        {{#each products}}
          <a href="/products/{{this._id}}" class="product-card-link">
            <div class="product-card">
              {{#if this.thumbnails.length}}
                <img src="{{lookup this.thumbnails 0}}" alt="{{this.title}}" />
              {{else}}
                <img
                  src="/img/default-product.png"
                  alt="Sin imagen disponible"
                />
              {{/if}}
              <div class="product-details">
                <h3>{{this.title}}</h3>
                <p class="description">{{this.description}}</p>
                <p class="price">Precio: <strong>${{this.price}}</strong></p>
                <p class="stock">Habitaciones disponibles:
                  <strong>{{this.stock}}</strong>
                </p>
              </div>
            </div>
          </a>
        {{/each}}
      </div>

      <!-- Paginación -->
      <div class="pagination">
        {{#if hasPrevPage}}
          <a
            href="?page={{prevPage}}&limit={{limit}}&sort={{sort}}&query={{query}}"
          >Anterior</a>
        {{/if}}
        <span>Página {{page}} de {{totalPages}}</span>
        {{#if hasNextPage}}
          <a
            href="?page={{nextPage}}&limit={{limit}}&sort={{sort}}&query={{query}}"
          >Siguiente</a>
        {{/if}}
      </div>
    </main>

    <script>
      function addToCart(productId) { alert("Reservado: " + productId);
      // Acá podés hacer un fetch al carrito o guardar en localStorage
      }
    </script>
  </body>
</html>